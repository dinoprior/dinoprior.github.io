<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <title>Google Weather API test</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    pre { background: #f0f0f0; padding: 10px; border-radius: 4px; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h2>Test Google Weather API — Current Conditions</h2>
  <label>API Key: <input id="apiKey" value="YOUR_API_KEY" style="width:300px" /></label><br><br>
  <label>Latitude: <input id="lat" value="50.0755" /></label>
  <label>Longitude: <input id="lon" value="14.4378" /></label><br><br>
  <button id="btn">Získat počasí</button>
  <h3>Status:</h3>
  <div id="status">—</div>
  <h3>Výsledek JSON:</h3>
  <pre id="output">—</pre>

<script>
document.getElementById('btn').addEventListener('click', async () => {
  const apiKey = document.getElementById('apiKey').value.trim();
  const lat = document.getElementById('lat').value.trim();
  const lon = document.getElementById('lon').value.trim();
  const statusEl = document.getElementById('status');
  const out = document.getElementById('output');

  if (!apiKey) {
    statusEl.textContent = 'Zadej API key';
    return;
  }
  if (!lat || !lon) {
    statusEl.textContent = 'Zadej souřadnice';
    return;
  }

  const url = `https://weather.googleapis.com/v1/currentConditions:lookup?key=${apiKey}&location.latitude=${lat}&location.longitude=${lon}`;
  statusEl.textContent = 'Odesílám request na: ' + url;
  out.textContent = '';

  try {
    const response = await fetch(url);
    statusEl.textContent = `HTTP ${response.status} ${response.statusText}`;
    const text = await response.text();
    try {
      const json = JSON.parse(text);
      out.textContent = JSON.stringify(json, null, 2);
      console.log("Odpověď JSON:", json);
    } catch(e) {
      out.textContent = text;
      console.warn("Odpověď není platný JSON:", text);
    }
  } catch (err) {
    statusEl.textContent = 'Fetch error: ' + err.message;
    console.error("Fetch chyba:", err);
  }
});
</script>
</body>
</html>

