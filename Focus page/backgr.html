<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zpr√°vy podle zdroje</title>
  <style>
    body { font-family: system-ui, sans-serif; margin: 2rem; background: #f8f9fa; color: #222; }
    h1 { margin-bottom: 1rem; }
    select, button { padding: 0.5rem; margin-right: 1rem; font-size: 1rem; }
    .news { margin-top: 2rem; }
    .article { background: white; padding: 1rem; border-radius: 10px; margin-bottom: 1rem; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    .article h3 { margin-top: 0; }
  </style>
</head>
<body>

  <h1>üì∞ Aktu√°ln√≠ zpr√°vy</h1>

  <div>
    <label for="source-select">Vyber zdroj:</label>
    <select id="source-select"></select>
    <button id="load-btn">Naƒç√≠st zpr√°vy</button>
  </div>

  <div class="news" id="news-container"></div>

  <script>
    const apiKey = "946ec53909df4d63bbb1df81f137422a"; // ‚¨ÖÔ∏è vlo≈æ sv≈Øj kl√≠ƒç z worldnewsapi.com
    const sourceSelect = document.getElementById("source-select");
    const newsContainer = document.getElementById("news-container");
    const loadBtn = document.getElementById("load-btn");

    // üóûÔ∏è Naƒçten√≠ seznamu zdroj≈Ø
    async function loadSources() {
      try {
        const res = await fetch(`https://api.worldnewsapi.com/search-news-sources?api-key=${apiKey}&language=cs`);
        const data = await res.json();
        const sources = data.sources || [];

        sources.forEach(src => {
          const opt = document.createElement("option");
          opt.value = src.id || src.source_id || src.name;
          opt.textContent = src.name;
          sourceSelect.appendChild(opt);
        });
      } catch (err) {
        console.error("Chyba p≈ôi naƒç√≠t√°n√≠ zdroj≈Ø:", err);
      }
    }

    // üì∞ Naƒçten√≠ zpr√°v z vybran√©ho zdroje
    async function loadNews() {
      const source = sourceSelect.value;
      newsContainer.innerHTML = "<p>Naƒç√≠t√°m zpr√°vy...</p>";

      try {
        const res = await fetch(`https://api.worldnewsapi.com/search-news?api-key=${apiKey}&language=cs&source=${source}&number=5`);
        const data = await res.json();
        const articles = data.news || [];

        newsContainer.innerHTML = "";
        if (articles.length === 0) {
          newsContainer.innerHTML = "<p>≈Ω√°dn√© zpr√°vy k zobrazen√≠.</p>";
          return;
        }

        articles.forEach(a => {
          const div = document.createElement("div");
          div.classList.add("article");
          div.innerHTML = `
            <h3><a href="${a.url}" target="_blank">${a.title}</a></h3>
            <p>${a.text || ""}</p>
            <small><strong>${a.author || "Nezn√°m√Ω autor"}</strong> ‚Ä¢ ${a.publish_date || ""}</small>
          `;
          newsContainer.appendChild(div);
        });

      } catch (err) {
        console.error("Chyba p≈ôi naƒç√≠t√°n√≠ zpr√°v:", err);
        newsContainer.innerHTML = "<p>Nepoda≈ôilo se naƒç√≠st zpr√°vy.</p>";
      }
    }

    // üîò Ud√°losti
    window.addEventListener("load", loadSources);
    loadBtn.addEventListener("click", loadNews);
  </script>

</body>
</html>
